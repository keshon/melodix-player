<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>üéµ Melodix Player ‚Äî Self-hosted Discord music bot written in Go</title>

        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Exo+2:ital,wght@0,100..900;1,100..900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">
        <style>
            :root {
                --background-color-dark: #121212;
                --background-color-light: #ffffff;
                --text-color-dark: #e0e0e0;
                --text-color-light: #000000;
                --link-color-dark: #03a9f4;
                --link-hover-color-dark: #0288d1;
                --link-color-light: #007bff;
                --link-hover-color-light: #0056b3;
                --code-background-color-dark: #2e2e2e;
                --code-background-color-light: #f5f5f5;
                --header-secondary-color-light: hsl(305 4% 44% / 1);
            }

            body {
                background-color: var(--background-color-dark);
                color: var(--text-color-dark);
                font-family: "Ubuntu", sans-serif;
                font-weight: 400;
                line-height: 28px;
                font-size: 16px;
            }

            body.light-theme {
                background-color: var(--background-color-light);
                color: var(--text-color-light);
            }

            a {
                color: var(--link-color-dark);
            }

            a:hover {
                color: var(--link-hover-color-dark);
            }

            body.light-theme a {
                color: var(--link-color-light);
            }

            body.light-theme a:hover {
                color: var(--link-hover-color-light);
            }

            img {
                max-width: 100%;
                border-radius: 16px;
            }

            h1,
            h2,
            h3,
            h4,
            h5,
            h6 {
                font-family: "Exo 2", sans-serif;
                font-weight: 600;
                text-transform: uppercase;
            }

            h1 {
                font-size: 34px;
                line-height: 1.25;
                padding-top: 36px;
            }

            h2 {
                font-size: 28px;
                line-height: 1.25;
                padding-top: 24px;
            }

            h3 {
                font-size: 20px;
                line-height: 1.25;
                padding-top: 16px;
                color: var(--header-secondary-color-light) !important;
            }

            h4 {
                font-size: 18px;
                line-height: 1.25;
            }

            h5 {
                font-size: 16px;
                line-height: 1.25;
            }

            h6 {
                font-size: 14px;
                line-height: 1.25;
            }

            body.light-theme h1,
            body.light-theme h2,
            body.light-theme h3,
            body.light-theme h4,
            body.light-theme h5,
            body.light-theme h6 {
                color: #000000;
            }

            code {
                background-color: var(--code-background-color-dark);
                padding: 2px 4px;
                border-radius: 4px;
            }

            body.light-theme code {
                background-color: var(--code-background-color-light);
                color: #b44646;
            }

            pre {
                background-color: var(--code-background-color-dark);
                padding: 10px;
                border-radius: 4px;
                overflow-x: auto;
            }

            body.light-theme pre {
                background-color: var(--code-background-color-light);
            }

            .container {
                max-width: 840px;
                margin: 0 auto;
            }

            ul {
                list-style-type: none;
                padding-left: 10px;
            }
        </style>

        <!-- Yandex.Metrika counter -->
        <script type="text/javascript" >
            (function (m, e, t, r, i, k, a) {
                m[i] = m[i] || function () {
                    (m[i].a = m[i].a || []).push(arguments)
                };
                m[i].l = 1 * new Date();
                for (var j = 0; j < document.scripts.length; j++) {
                    if (document.scripts[j].src === r) {
                        return;
                    }
                }
                k = e.createElement(t),
                a = e.getElementsByTagName(t)[0],
                k.async = 1,
                k.src = r,
                a
                    .parentNode
                    .insertBefore(k, a)
            })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

            ym(95482608, "init", {
                clickmap: true,
                trackLinks: true,
                accurateTrackBounce: true,
                webvisor: true
            });
        </script>
        <noscript>
            <div><img src="https://mc.yandex.ru/watch/95482608" style="position:absolute; left:-9999px;" alt=""/></div>
        </noscript>
        <!-- /Yandex.Metrika counter -->
    </head>
    <body class="light-theme">
        <div class="container">
            <img src="https://raw.githubusercontent.com/keshon/melodix-player/master/assets/banner-readme.png" alt="Header">

            <div style="display:none">
                <a href="./README_ES.md"><img src="https://img.shields.io/badge/Espa√±ol-README-blue" alt="Espa√±ol"></a>
                <a href="./README_FR.md"><img src="https://img.shields.io/badge/Fran√ßais-README-blue" alt="Fran√ßais"></a>
                <a href="./README_CN.md"><img src="https://img.shields.io/badge/‰∏≠Êñá-README-blue" alt="‰∏≠Êñá"></a>
                <a href="./README_JP.md"><img src="https://img.shields.io/badge/Êó•Êú¨Ë™û-README-blue" alt="Êó•Êú¨Ë™û"></a>
            </div>

            <h1>üéµ Melodix Player ‚Äî <br>Self-hosted Discord music bot written in Go</h1>
            <p>Melodix Player is my pet project that plays audio from YouTube and audio streaming links to Discord voice channels.</p>

            <img src="https://raw.githubusercontent.com/keshon/melodix-player/master/assets/demo.gif" alt="Playing Example">

            <h2>üåü Features Overview</h2>

            <h3>üéß Playback Support</h3>
            <ul>
                <li>üé∂ Single track added by song name or YouTube link.</li>
                <li>üé∂ Multiple tracks added via multiple YouTube links (space separated).</li>
                <li>üé∂ Tracks from public user playlists.</li>
                <li>üé∂ Tracks from "MIX" playlists.</li>
                <li>üìª Streaming links (e.g., radio stations).</li>
            </ul>

            <h3>‚öôÔ∏è Additional Features</h3>
            <ul>
                <li>üåê Operation across multiple Discord servers (guild management).</li>
                <li>üìú Access to history of previously played tracks with sorting options.</li>
                <li>üíæ Downloading tracks from YouTube as mp3 files for caching.</li>
                <li>üéº Sideloading audio mp3 files.</li>
                <li>üé¨ Sideloading video files with audio extraction as mp3 files.</li>
                <li>üîÑ Playback auto-resume support for connection interruptions.</li>
                <li>üõ†Ô∏è REST API support (limited at the moment).</li>
            </ul>

            <h3>‚ö†Ô∏è Current Limitations</h3>
            <ul>
                <li>üö´ The bot cannot play YouTube streams.</li>
                <li>‚è∏Ô∏è Playback auto-resume support creates noticeable pauses.</li>
                <li>‚è© Sometimes playback speed is slightly faster than intended.</li>
                <li>üêû It's not bug-free.</li>
            </ul>

            <h2>üöÄ Try Melodix Player</h2>
            <p>You can test Melodix in two ways:</p>
            <ul>
                <li>üñ•Ô∏è Download <a href="https://github.com/keshon/melodix-player/releases" target="_blank">compiled binaries</a> (available only for Windows). Ensure FFMPEG is installed on your system and added to the global PATH variable (or specify the path to FFMPEG directly in the <code>.env</code> config file). Follow the "Create bot in Discord Developer Portal" section to set up the bot in Discord.</li>
                <li>üéôÔ∏è Join the <a href="https://discord.gg/NVtdTka8ZT">Official Discord server</a> and use the voice and <code>#bot-spam</code> channels.</li>
            </ul>

            <h2>üìù Available Discord Commands</h2>
            <p>Melodix Player supports various commands with respective aliases (if applicable). Some commands require additional parameters.</p>

            <h3>‚ñ∂Ô∏è Playback Commands</h3>
            <ul>
                <li>
                    <code>!play [title|url|stream|id]</code> (aliases: <code>!p ..</code>, <code>!&gt; ..</code>) ‚Äî Parameters: song name, YouTube URL, audio streaming URL, history ID.</li>
                <li>
                    <code>!skip</code> (aliases: <code>!next</code>, <code>!&gt;&gt;</code>) ‚Äî Skip to the next track in the queue.</li>
                <li>
                    <code>!pause</code> (alias: <code>!!</code>) ‚Äî Pause playback.</li>
                <li>
                    <code>!resume</code> (aliases: <code>!r</code>, <code>!!&gt;</code>) ‚Äî Resume paused playback or start playback if a track was added via <code>!add ..</code>.</li>
                <li>
                    <code>!stop</code> (alias: <code>!x</code>) ‚Äî Stop playback, clear the queue, and leave the voice channel.</li>
            </ul>

            <h3>üìã Queue Commands</h3>
            <ul>
                <li>
                    <code>!add [title|url|stream|id]</code> (aliases: <code>!a</code>, <code>!+</code>) ‚Äî Parameters: song name, YouTube URL, audio streaming URL, history ID (same as for <code>!play ..</code>).</li>
                <li>
                    <code>!list</code> (aliases: <code>!queue</code>, <code>!l</code>, <code>!q</code>) ‚Äî Show the current songs queue.</li>
            </ul>

            <h3>üìö History Commands</h3>
            <ul>
                <li>
                    <code>!history</code> (aliases: <code>!time</code>, <code>!t</code>) ‚Äî Show history of recently played tracks. Each track in history has a unique ID for playback/queueing.</li>
                <li>
                    <code>!history count</code> (aliases: <code>!time count</code>, <code>!t count</code>) ‚Äî Sort history by playback count.</li>
                <li>
                    <code>!history duration</code> (aliases: <code>!time duration</code>, <code>!t duration</code>) ‚Äî Sort history by track duration.</li>
            </ul>

            <h3>‚ÑπÔ∏è Information Commands</h3>
            <ul>
                <li>
                    <code>!help</code> (aliases: <code>!h</code>, <code>!?</code>) ‚Äî Show help cheatsheet.</li>
                <li>
                    <code>!help play</code> ‚Äî Extra information about playback commands.</li>
                <li>
                    <code>!help queue</code> ‚Äî Extra information about queue commands.</li>
                <li>
                    <code>!about</code> (alias: <code>!v</code>) ‚Äî Show version (build date) and related links.</li>
                <li>
                    <code>whoami</code> ‚Äî Send user-related info to the log. Needed to set up superadmin in <code>.env</code> file.</li>
            </ul>

            <h3>üíæ Caching & Sideloading Commands</h3>
            <p>These commands are available only for superadmins (host server owners).</p>
            <ul>
                <li>
                    <code>!curl [YouTube URL]</code> ‚Äî Download as mp3 file for later use.</li>
                <li>
                    <code>!cached</code> ‚Äî Show currently cached files (from <code>cached</code> directory). Each server operates its own files.</li>
                <li>
                    <code>!cached sync</code> ‚Äî Synchronize manually added mp3 files to the <code>cached</code> directory.</li>
                <li>
                    <code>!uploaded</code> ‚Äî Show uploaded video clips in the <code>uploaded</code> directory.</li>
                <li>
                    <code>!uploaded extract</code> ‚Äî Extract mp3 files from video clips and store them in the <code>cached</code> directory.</li>
            </ul>

            <h3>üîß Administration Commands</h3>
            <ul>
                <li>
                    <code>!register</code> ‚Äî Enable Melodix command listening (execute once for each new Discord server).</li>
                <li>
                    <code>!unregister</code> ‚Äî Disable command listening.</li>
                <li>
                    <code>melodix-prefix</code> ‚Äî Show the current prefix (<code>!</code> by default, see <code>.env</code> file).</li>
                <li>
                    <code>melodix-prefix-update "[new_prefix]"</code> ‚Äî Set a custom prefix (in quotes) for a guild to avoid collisions with other bots.</li>
                <li>
                    <code>melodix-prefix-reset</code> ‚Äî Revert to the default prefix set in <code>.env</code> file.</li>
            </ul>

            <h3>üí° Command Usage Examples</h3>
            <p>To use the <code>play</code> command, provide a YouTube video title, URL, or history ID:</p>
            <pre><code>!play Never Gonna Give You Up
!p https://www.youtube.com/watch?v=dQw4w9WgXcQ
!&gt; 5  (assuming 5 is an ID from <code>!history</code>)</code></pre>
            <p>For adding a song to the queue, use:</p>
            <pre><code>!add Never Gonna Give You Up
!resume</code></pre>

            <h2>üîß How to Set Up the Bot</h2>

            <h3>üîó Create a Bot in the Discord Developer Portal</h3>
            <p>To add Melodix to a Discord server, follow these steps:</p>
            <ol>
                <li>Create an application in the <a href="https://discord.com/developers/applications">Discord Developer Portal</a> and obtain the <code>APPLICATION_ID</code> (in the General section).</li>
                <li>In the Bot section, enable <code>PRESENCE INTENT</code>, <code>SERVER MEMBERS INTENT</code>, and <code>MESSAGE CONTENT INTENT</code>.</li>
                <li>Use the following link to authorize the bot: <code>discord.com/oauth2/authorize?client_id=YOUR_APPLICATION_ID&scope=bot&permissions=36727824</code>
                    <ul>
                        <li>Replace <code>YOUR_APPLICATION_ID</code> with your Bot's Application ID from step 1.</li>
                    </ul>
                </li>
                <li>Select a server and click "Authorize".</li>
                <li>Grant the necessary permissions for Melodix to function correctly (access to text and voice channels).</li>
            </ol>
            <p>After adding the bot, build it from sources or download <a href="https://github.com/keshon/melodix-player/releases" target="_blank">compiled binaries</a>. Docker deployment instructions are available in <code>docker/README.md</code>.</p>

            <h3>üõ†Ô∏è Building Melodix from Sources</h3>
            <p>This project is written in Go, so ensure your environment is ready. Use the provided scripts to build Melodix Player from sources:</p>
            <ul>
                <li>
                    <code>bash-and-run.bat</code> (or <code>.sh</code> for Linux): Build the debug version and execute.</li>
                <li>
                    <code>build-release.bat</code> (or <code>.sh</code> for Linux): Build the release version.</li>
                <li>
                    <code>assemble-dist.bat</code>: Build the release version and assemble it as a distribution package (Windows only).</li>
            </ul>
            <p>Rename <code>.env.example</code> to <code>.env</code> and store your Discord Bot Token in the <code>DISCORD_BOT_TOKEN</code> variable. Install <a href="https://ffmpeg.org/">FFMPEG</a> (only recent versions are supported). If using a portable FFMPEG, specify the path in <code>DCA_FFMPEG_BINARY_PATH</code> in the <code>.env</code> file.</p>

            <h3>üê≥ Docker Deployment</h3>
            <p>For Docker deployment, refer to <code>docker/README.md</code> for specific instructions.</p>

            <h2>üåê REST API</h2>
            <p>Melodix Player provides several API routes, subject to change.</p>

            <h3>Guild Routes</h3>
            <ul>
                <li>
                    <code>GET /guild/ids</code>: Retrieve active guild IDs.</li>
                <li>
                    <code>GET /guild/playing</code>: Get info about the currently playing track in each active guild.</li>
            </ul>

            <h3>History Routes</h3>
            <ul>
                <li>
                    <code>GET /history</code>: Access the overall history of played tracks.</li>
                <li>
                    <code>GET /history/:guild_id</code>: Fetch the history of played tracks for a specific guild.</li>
            </ul>

            <h3>Avatar Routes</h3>
            <ul>
                <li>
                    <code>GET /avatar</code>: List available images in the avatar folder.</li>
                <li>
                    <code>GET /avatar/random</code>: Fetch a random image from the avatar folder.</li>
            </ul>

            <h3>Log Routes</h3>
            <ul>
                <li>
                    <code>GET /log</code>: Show the current log.</li>
                <li>
                    <code>GET /log/clear</code>: Clear the log.</li>
                <li>
                    <code>GET /log/download</code>: Download the log as a file.</li>
            </ul>

            <h2>üÜò Support</h2>
            <p>For any questions, get support in the <a href="https://discord.gg/NVtdTka8ZT">Official Discord server</a>.</p>

            <h2>üèÜ Acknowledgment</h2>
            <p>I drew inspiration from <a href="https://github.com/FabijanZulj/Muzikas">Muzikas</a>, a user-friendly Discord bot by Fabijan Zulj.</p>

            <h2>üìú License</h2>
            <p>Melodix is licensed under the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>
        </div>
    </body>
</html>